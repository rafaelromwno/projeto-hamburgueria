@model IEnumerable<WebApplicationHamburgueriaMvc.Models.Pedido>

@{
    ViewData["Title"] = "Relatório de Vendas";
}

<h2>Pedidos Por Período</h2>

<nav class="navbar bg-light mb-4">
    <div class="container-fluid">
        <form class="d-flex flex-wrap align-items-center" method="get">
            <div class="me-3 mb-2">
                <label for="minDate" class="form-label">Data Inicial</label>
                <input type="date" id="minDate" class="form-control" name="minDate" value="@ViewData["minDate"]" />
            </div>
            <div class="me-3 mb-2">
                <label for="maxDate" class="form-label">Data Final</label>
                <input type="date" id="maxDate" class="form-control" name="maxDate" value="@ViewData["maxDate"]" />
            </div>
            <button type="submit" class="btn btn-success mt-3">Filtrar</button>
        </form>
    </div>
</nav>

<div class="card">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0">Resumo dos Pedidos</h4>
    </div>
    <div class="card-body">
        <p><strong>Total de Pedidos:</strong> @Model.Count()</p>
        <p><strong>Total de Lanches nos Pedidos:</strong> @Model.Sum(obj => obj.TotalItensPedido)</p>
        <p><strong>Valor Total dos Pedidos:</strong> @Model.Sum(obj => obj.PedidoTotal).ToString("C")</p>
    </div>
</div>

<div class="table-responsive mt-4">
    <table class="table table-striped table-hover">
        <thead class="table-primary">
            <tr>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().PedidoId)</th>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().Nome)</th>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().Email)</th>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().Telefone)</th>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().PedidoTotal)</th>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().TotalItensPedido)</th>
                <th>@Html.DisplayNameFor(model => model.FirstOrDefault().PedidoEntregueEm)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.PedidoId)</td>
                    <td>@Html.DisplayFor(modelItem => item.Nome)</td>
                    <td>@Html.DisplayFor(modelItem => item.Email)</td>
                    <td>@Html.DisplayFor(modelItem => item.Telefone)</td>
                    <td>@Html.DisplayFor(modelItem => item.PedidoTotal)</td>
                    <td>@Html.DisplayFor(modelItem => item.TotalItensPedido)</td>
                    <td>@Html.DisplayFor(modelItem => item.PedidoEntregueEm)</td>
                </tr>
            }
        </tbody>
    </table>
</div>
